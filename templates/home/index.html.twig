{% extends 'base.html.twig' %}

{% block title %}Hello HomeController!{% endblock %}

{% block body %}
<div class="container">

<section class="home-section">
    <div class="hero">
        {# <img src="{{ asset('assets/img/divers/ferrari-hero-1.webp')}}" alt="image de la page d'accueil"> #}
        <h1>Bienvenue sur F1 Zone !</h1>
        <p>Vivez la Formule 1 à pleine vitesse.</p>
    </div>
</section>

{# cards actus #}
<section class="home-section">
    <h2>Actualitées</h2>
    <div class="news-cards">
        <a href="{{ path('gp_resume') }}" class="news-card">
            <h3>Resumé des GP</h3>
            <img src="{{ asset('assets/img/articles/news1.jpg') }}" alt="Image actu 1">
        </a>
        <a href="#" class="news-card">
            <h3>Transfert pilotes</h3>
            <img src="{{ asset('assets/img/divers/pilotes-grp.webp') }}" alt="Image actu 2">
        </a>
        <a href="{{ path('app_reglementation_fia') }}" class="news-card">
            <h3>Nouvelle reglementation</h3>
            <img src="{{ asset('assets/img/divers/Fia-logo.jpg') }}" alt="Image actu 3">
        </a>
        <a href="{{ path('app_dernier_vainqueur') }}" class="news-card">
            <h3>dernier vainqueur</h3>
            <img src="{{ asset('assets/img/articles/japon-verstappen.jpg') }}" alt="Image actu 4">
        </a>
    </div>
</section>
</div>



{# section pilotes #}
<section>
    <div class="container">
        <h2>Les pilotes</h2>
        {% set pilotes_par_4 = pilotes|batch(4, '') %}
        {% for ligne in pilotes_par_4 %}
            <div class="pilotes-cards{% if loop.last and (ligne|length < 4) %} pilotes-cards-center{% endif %}">
                {% for pilote in ligne %}
                    {% if pilote %}
                        <div class="pilote-card">
                            <img src="{{ asset(pilote.photo ? 'assets/img/pilote/' ~ pilote.photo : 'assets/img/divers/pilotes-grp.webp') }}" alt="Photo de {{ pilote.prenom }} {{ pilote.nom }}">
                            <div class="pilote-info">
                                <h3>{{ pilote.prenom }} {{ pilote.nom }}</h3>
                                <div class="ecurie">{{ pilote.ecurie ? pilote.ecurie.nom : 'Sans écurie' }}</div>
                                <a href="{{ path('app_pilote_show', {id: pilote.id}) }}" class="profil-btn btn">Voir Profil</a>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        {% endfor %}
    </div>
</section>



{# section classement #}
<section id="classement">
  <div class="container">
    <h2>Classements</h2>

    <form method="get" action="#classement" class="gp-filter-form gp-filter-form-mb">
        <label for="grand_prix">Filtrer par Grand Prix :</label>
        <select name="grand_prix" id="grand_prix" onchange="this.form.submit()">
            <option value="">Classement général</option>
            {% for gp in grand_prix_list %}
                <option value="{{ gp }}" {% if gp == selected_gp %}selected{% endif %}>{{ gp }}</option>
            {% endfor %}
        </select>
    </form>

    <div class="classement-flex">
        <div class="classement-box classement-compact">
            <div class="classement-title">Classement pilotes</div>
            <table class="classement-table">
                <tbody>
                {% for pilote in classement_pilotes|slice(0,3) %}
                    <tr>
                        <td>#{{ loop.index }}</td>
                        <td>{{ pilote.prenom }} {{ pilote.nom }}</td>
                        <td class="pts">{{ pilote.totalPoints }} pts</td>
                    </tr>
                {% endfor %}
                </tbody>
                <tbody id="all-pilotes" class="classement-hidden">
                {% for pilote in classement_pilotes|slice(3) %}
                    <tr>
                        <td>#{{ loop.index + 3 }}</td>
                        <td>{{ pilote.prenom }} {{ pilote.nom }}</td>
                        <td class="pts">{{ pilote.totalPoints }} pts</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <button class="toggle-btn" data-toggle-classement="all-pilotes">▼</button>
        </div>
        <div class="classement-box classement-compact">
            <div class="classement-title">Classement constructeur</div>
            <table class="classement-table">
                <tbody>
                {% for ecurie in classement_ecuries|slice(0,3) %}
                    <tr>
                        <td>#{{ loop.index }}</td>
                        <td>{{ ecurie.nom }}</td>
                        <td class="pts">{{ ecurie.totalPoints }} pts</td>
                    </tr>
                {% endfor %}
                </tbody>
                <tbody id="all-ecuries" class="classement-hidden">
                {% for ecurie in classement_ecuries|slice(3) %}
                    <tr>
                        <td>#{{ loop.index + 3 }}</td>
                        <td>{{ ecurie.nom }}</td>
                        <td class="pts">{{ ecurie.totalPoints }} pts</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <button class="toggle-btn" data-toggle-classement="all-ecuries">▼</button>
        </div>
    </div>
  </div>
</section>

</section>


{# section quiz F1 juste après classement #}
<section id="quiz-home">
    <div class="container">
        <h2>Quiz F1</h2>
        <div class="quiz-card">
            <h3>Testez vos connaissances F1 !</h3>
            <p>3 niveaux de difficulté : Facile, Intermédiaire, Expert</p>
            <a href="{{ path('app_quiz') }}" class="btn">Lancer le quiz</a>
        </div>
    </div>
</section>

{% endblock %}