{% extends 'base.html.twig' %}


{% block body %}
<div class="circuit-detail-container">
  <a href="{{ path('app_circuits') }}" class="circuit-back-btn">← Retour aux circuits</a>
  <div class="circuit-detail-flex">
    <div class="circuit-detail-img">
      {% if circuit.imageAvif %}
        <img src="{{ asset('assets/img/circuit/' ~ circuit.imageAvif) }}" alt="{{ circuit.nomCircuit }}">
      {% endif %}
    </div>
    <div class="circuit-detail-info">
      <h2 class="circuit-detail-title">{{ circuit.nomCircuit }}</h2>
      <div class="circuit-detail-block">
        <span class="circuit-detail-label">Circuit Length</span>
        <span class="circuit-detail-value">{{ circuit.longueurKm }}km</span>
      </div>
      <div class="circuit-detail-row">
        <div>
          <span class="circuit-detail-label">First Grand Prix</span>
          <span class="circuit-detail-value">{{ circuit.premiereApparition }}</span>
        </div>
        <div>
          <span class="circuit-detail-label">Number of Laps</span>
          <span class="circuit-detail-value">{{ circuit.nombreTours }}</span>
        </div>
      </div>
      <div class="circuit-detail-row">
        <div>
          <span class="circuit-detail-label">Fastest lap time</span>
          <span class="circuit-detail-value">{{ circuit.meilleurTemps|default('N/A') }}</span>
          <span class="circuit-detail-label circuit-detail-pilote">{{ circuit.piloteMeilleurTemps|default('') }}</span>
        </div>
        <div>
          <span class="circuit-detail-label">Race Distance</span>
          <span class="circuit-detail-value">{{ circuit.distanceTotaleKm }}km</span>
        </div>
      </div>
    </div>
  </div>
</div>

{# Bloc sessions #}
<div class="circuit-sessions">
  {% for session in sessions %}
    <div class="circuit-session-row">
      <div class="circuit-session-date">
        <span class="circuit-session-day">{{ session.date|date('d') }}</span>
        <span class="circuit-session-month">{{ session.date|date('M')|upper }}</span>
      </div>
      <div class="circuit-session-type">{{ session.type|upper }}</div>
      <div class="circuit-session-time">{{ session.time }}</div>
    </div>
  {% endfor %}
</div>

{# Bloc classement #}
<div class="circuit-classement">
  <table class="circuit-classement-table">
    <thead>
      <tr>
        <th>Pos</th>
        <th>Pilote</th>
        <th>Ecurie</th>
        <th>Temps</th>
        <th>Points</th>
      </tr>
    </thead>
    <tbody>
      {% for result in classement %}
        <tr>
          <td>{{ result.position }}</td>
          <td>{{ result.pilote }}</td>
          <td>{{ result.ecurie }}</td>
          <td>{{ result.temps }}</td>
          <td>{{ result.points }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{# Bloc classement constructeurs #}
{% if classementConstructeurs is defined and classementConstructeurs|length > 0 %}
<div class="circuit-constructeurs">
  <h3>Classement Constructeurs</h3>
  <table class="circuit-constructeurs-table">
    <thead>
      <tr>
        <th>Pos</th>
        <th>Écurie</th>
        <th>Points</th>
      </tr>
    </thead>
    <tbody>
      {% for result in classementConstructeurs %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ result.ecurie }}</td>
          <td>{{ result.points }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endif %}

{% endblock %}

{% block title %}{{ circuit.nomCircuit }} | Circuit{% endblock %}


