{% extends 'base.html.twig' %}

{% block title %}F1-Zone Inscription{% endblock %}

{% block body %}
<div class="container">
    <div class="auth-form-container">
    <h1 class="auth-form-title">Inscription</h1>
    {% for flash_error in app.flashes('verify_email_error') %}
        <div class="auth-form form-error-message" role="alert">{{ flash_error }}</div>
    {% endfor %}
    {% for message in app.flashes('success') %}
        <div class="auth-form form-success-message" role="alert">{{ message }}</div>
    {% endfor %}
    {% for message in app.flashes('danger') %}
        <div class="auth-form form-error-message" role="alert">{{ message }}</div>
    {% endfor %}
    <form method="post" class="auth-form">
        {% set global_errors = registrationForm.vars.errors|default([]) %}
        {% set filtered_global_errors = [] %}
        {% for error in global_errors %}
            {% if 'email' not in error.message|lower %}
                {% set filtered_global_errors = filtered_global_errors|merge([error]) %}
            {% endif %}
        {% endfor %}
        {% if filtered_global_errors|length > 0 %}
            <div class="auth-form form-error-message" role="alert">
                {% for error in filtered_global_errors %}
                    {{ error.message }}
                {% endfor %}
            </div>
        {% endif %}
        {{ form_row(registrationForm.email) }}
        {{ form_errors(registrationForm.email) }}
        {{ form_row(registrationForm.username, { label: 'Nom d\'utilisateur' }) }}
        {{ form_errors(registrationForm.username) }}
        <div class="password-label-row">
            <label for="registration_form_plainPassword">Mot de passe</label>
            <span class="password-info-tooltip" tabindex="0">
                <span class="password-info-icon">i</span>
                <span class="password-info-text">Le mot de passe doit contenir au moins 6 caract√®res, un chiffre et un caract√®re sp√©cial.</span>
            </span>
        </div>
        <div class="password-wrapper">
            {{ form_widget(registrationForm.plainPassword, {'attr': {'id': 'registration_form_plainPassword'}}) }}
            <span class="toggle-password" id="togglePassword">üëÅÔ∏è</span>
        </div>
        <div class="password-label-row password-label-row--confirm">
            <label for="registration_form_confirmPassword">Confirmer le mot de passe</label>
        </div>
        <div class="password-wrapper">
            {{ form_widget(registrationForm.confirmPassword, {'attr': {'id': 'registration_form_confirmPassword'}}) }}
            <span class="toggle-password" id="toggleConfirmPassword">üëÅÔ∏è</span>
        </div>
        {{ form_errors(registrationForm.confirmPassword) }}
        <div class="auth-checkbox">
            {{ form_widget(registrationForm.agreeTerms) }}
            <label for="registration_form_agreeTerms">Accepter les termes</label>
        </div>
        {{ form_errors(registrationForm.agreeTerms) }}
        {{ form_row(registrationForm._token) }}
        <button type="submit" class="btn">S'inscrire</button>
        <div class="form-links">
            <a href="{{ path('app_login') }}" class="auth-link-simple">D√©j√† inscrit ? Se connecter</a>
        </div>
        </form>
    </div>
</div>
{% endblock %}
